Fri May 15 17:57:23 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sign.c (hash_for): New and used in all places here.
	* main.h (DEFAULT_): new macros.
	* g10.c  (opt.def_digest_algo): Now set to 0

	* compress.c (init_compress): Add support for algo 1
	* options.h (def_compress_algo): New
	* g10.c (main): New option --compress-algo

Fri May 15 13:23:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (print_mds): New feature to print only one hash,
	chnaged formatting.

Thu May 14 15:36:24 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c (trap_unaligned) [__alpha__]: New
	* g10.c (trap_unaligned): Add call to this to track down SIGBUS
	on Alphas (to avoid the slow emulation code).

Wed May 13 11:48:27 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (do_signature): Support for v4 pakets.
	* keyedit.c (make_keysig_packet): Ditto.
	* build-packet.c (build_sig_subpkt_from_sig): New.
	(build_sig_subpkt): New.

	* elg.c (g10_elg_sign): removed keyid_from_skc.
	* dsa.c (g10_dsa_sign): Ditto.
	* rsa.c (g10_rsa_sign): Ditto.
	* keyedit.c (make_keysig_packet): Add call to keyid_from_skc

	* sign.c (clearsign_file): Support for v4 signatures.
	(sign_file): Ditto.

Wed May  6 09:31:24 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (do_parse): add support for 5 byte length leader.
	(parse_subpkt): Ditto.
	* build-packet.c (write_new_header): Ditto.

	* packet.h (SIGSUBPKT_): New constants.
	* parse-packet.c (parse_sig_subpkt): Changed name, made global,
	and arg to return packet length, chnaged all callers


Tue May  5 22:11:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (gen_dsa): New.
	* build_packet.c (do_secret_cert): Support for DSA

Mon May  4 19:01:25 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* compress.c: doubled buffer sizes
	* parse-packet.c (do_plaintext): now uses iobuf_read/write.

Mon May  4 09:35:53 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seskey.c (encode_md_value): Add optional argument hash_algo,
	changed all callers.

	* passphrase.c (make_dek_from_passphrase): Removed
	* (get_passhrase_hash): Changed name to passphrase_to_dek, add arg,
	changed all callers.

	* all: Introduced the new ELG identifier and added support for the
	encryption only one (which is okay to use by GNUPG for signatures).

Sun May  3 17:50:26 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h (PKT_OLD_COMMENT): New name for type 16.
	* parse-packet.c (parse_comment): Now uses type 61

Fri May  1 12:44:39 1998  Werner Koch,mobil,,,	(wk@tobold)

	* packet.h (count): Chnaged s2k count from byte to u32.
	* seckey-cert.c (do_check): Changed s2k algo 3 to 4, changed
	reading of count.
	* build-packet.c (do_secret_cert): ditto.
	* parse-packet.c (parse_certificate): ditto.

	* parse-packet.c (parse_symkeyenc): New.
	* build-packet.c (do_symkey_enc): New.

Thu Apr 30 16:33:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sign.c (clearsign_file): Fixed "Hash: " armor line.

Tue Apr 28 14:27:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_subpkt): Some new types.

Mon Apr 27 12:53:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Add option --skip-verify.
	* mainproc.c (check_sig_and_print): Ditto.

	* g10.c (print_mds): Add output for Tiger.

	* sign.c (sign_file): Now uses partial length headers if used
	in canonical textmode (kludge to fix a bug).

	* parse-packet.c (parse_certificate): Changed BLOWFISH id.
	* pubkey-enc.c (get_session_key): Ditto.
	* seskey.c (make_session_key): Ditto.
	* seckey-cert.c (protect_secret_key,do_check): Add BLOWFISH160.

Fri Apr 24 17:38:48 1998  Werner Koch,mobil,,,	(wk@tobold)

	* sig-check.c (check_key_signature): Add sig-class 0x14..0x17
	* keyedit.c (sign-key): Some changes to start with support of
	the above new sig-classes.

Wed Apr 22 09:01:57 1998  Werner Koch,mobil,,,	(wk@tobold)

	* getkey.c (compare_name): add email matching

Tue Apr 21 16:17:12 1998  Werner Koch,mobil,,,	(wk@tobold)

	* armor.c (armor_filter): fixed missing last LF before CSUM.

Thu Apr  9 11:35:22 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seckey-cert.c (do_check): New; combines all the check functions
	into one.

	* sign.c: removed all key management functions
	* keyedit.c: New.

Thu Apr  9 09:49:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* import.c (chk_self_sigs): Changed an error message.

Wed Apr  8 16:19:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h: packet structs now uses structs from the pubkey,
	removed all copy operations from packet to pubkey structs.

Wed Apr  8 13:40:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (verify_own_certs): Fixed "public key not found".

	* getkey.c (key_byname): New, combines public and secret key search.

	* pkclist.c (build_pkc_list): Add new arg usage, changed all callers.
	* skclist.c (build_skc_list): Likewise.

	* ringedit.c (find_keyblock, keyring_search2): Removed.

Wed Apr  8 09:47:21 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sig-check.c (do_check): Applied small fix from Ulf Möller.

Tue Apr  7 19:28:07 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c, encr-data.c, seckey-cert.c: Now uses cipher_xxxx
	functions instead of blowfish_xxx or cast_xxx

Tue Apr  7 11:04:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am (g10maint.o): Changed the way it is created.

Mon Apr  6 11:17:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c: New.
	* keygen.c (checksum,checksum_u16,checksum_mpi): Moved to misc.c
	* seckey-cert.c: Kludge for wrong ELG checksum implementation.

Sat Apr  4 20:07:01 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c (cipher_filter): Support for CAST5
	* encr-data.c (decode_filter): Ditto.
	(decrypt_data): Ditto.
	* seskey.c (make_session_key): Ditto.
	* seckey-cert.c (check_elg, check_dsa): Ditto,
	(protect_secret_key): Ditto.
	* pubkey-enc.c (get_session_key): Ditto.
	* passphrase.c (hash_passphrase): Ditto.

Thu Apr  2 20:22:35 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* gpgd.c: New

Thu Apr  2 10:38:16 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (generate_keypair): Add valid_days stuff.
	* trustdb.c (check_trust): Add check for valid_days.

Wed Apr  1 16:15:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (generate_keypair): Addional question whether the
	selected large keysize is really needed.

Wed Apr  1 15:56:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seckey-cert.c (protect_secret_key): merged protect_xxx to here.

Wed Apr  1 10:34:46 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am (g10maint.c): Changed creation rule, so that it works
	on FreeBSD (missing CFLAGS).

	* parse-packet.c (parse_subkey): Removed.

Thu Mar 19 15:22:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (keyring_enum): Fixed problem with reading too
	many packets. Add support to read secret keyrings.

	* getkey.c (scan_keyring): Removed
	(lookup): New to replace scan_keyring.
	(scan_secret_keyring): Removed.
	(lookup_skc): New.

Wed Mar 18 11:47:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (enum_keyblocks): New read mode 11.

	* keyid.c (elg_fingerprint_md): New and changed all other functions
	to call this if the packet version is 4 or above.

Tue Mar 17 20:46:16 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_certificate): Add listing support for subkeys.

Tue Mar 17 20:32:22 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (is_armored): Allow marker packet.

Thu Mar 12 13:36:49 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (check_trust): Checks timestamp of pubkey.
	* sig-check. (do_check): Compares timestamps.

Tue Mar 10 17:01:56 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Add call to init_signals.
	* signal.c: New.

Mon Mar  9 12:43:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* dsa.c: New
	* packet.h, free-packet.c, parse-packet.c : Add support for DSA
	* sig-check.c, getkey.c, keyid.c, ringedit.c: Ditto.
	* seckey-cert.c: Ditto.

	* packet.h : Moved .digest_algo of signature packets to outer
	structure. Changed all references

Sun Mar  8 13:06:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* openfile.c : Support for stdout filename "-".

	* mainproc.c (check_sig_and_print): Enhanced status output:
	* status.c (write_status_text): New.

Fri Mar  6 16:10:54 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* kbnode.c (clone_kbnode): Fixed private_flag.

	* mainproc.c (list_node): Output of string "Revoked" as user-id.

Fri Mar  6 14:26:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Add userids to "-kv" and cleaned up this stuff.

Fri Mar  6 12:45:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Changed semantics of the list-... commands
	and added a new one. Removed option "-d"

	* decrypt.c: New.

	* trustdb.c (init_trustdb): Autocreate directory only if it ends
	in "/.gnupg".

Thu Mar  5 12:12:11 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (do_proc_packets): New. Common part of proc_packet.
	(proc_signature_packets): special version to handle signature data.
	* verify.c: New.
	* g10.c (aVerify): New.
	* plaintext.c (hash_datafiles): New.
	* compress.c (handle_compressed): Add callback arg, changed caller.

Thu Mar  5 10:20:06 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c: Is nom the common source for gpg and gpgm
	* g10maint.c: Removed
	* Makefile.am: Add rule to build g10maint.c

Thu Mar  5 08:43:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Changed the way clear text sigs are faked.

Wed Mar  4 19:47:37 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10maint.c (aMuttKeyList): New
	* keylist.c: New.

Wed Mar  4 17:20:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (get_pubkey_byname): Kludge to allow 0x prefix.

Tue Mar  3 13:46:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10maint.c (main): New option --gen-random.

Tue Mar  3 09:50:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (aDeleteSecretKey): New.
	(aEditSig): Add option "--edit-key" as synonym for "--edit-sig".
	(aDeleteSecretKey): New.
	* getkey.c (seckey_available): New.
	* sign.c (delete_key): Enhanced to delete secret keys, changed all
	callers.

Mon Mar  2 21:23:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pkc_list.c (build_pkc_list): Add interactive input of user ID.

Mon Mar  2 20:54:05 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pkclist.c (do_we_trust_pre): New.
	(add_ownertrust): Add message.
	* trustdb.c (enum_trust_web): Quick fix.

Mon Mar  2 13:50:53 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): New action aDeleteKey
	* sign.c (delete_key): New.

Sun Mar  1 16:38:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (do_check): No returns TRUST_UNDEFINED instead of
	eof error.

Fri Feb 27 18:14:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (find_header): Removed trailing CR on headers.

Fri Feb 27 18:02:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (keyring_search) [MINGW32]: Open and close file here
	because rename does not work on open files. Chnaged callers.

Fri Feb 27 16:43:11 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sig-check.c (do_check): Add an md_enable.
	* mainproc.c (do_check_sig): Use md_open in case of detached sig
	(proc_tree): Take detached sigs into account.

Fri Feb 27 15:22:46 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Make use of GNUPGHOME envvar.
	* g10main.c (main): Ditto.

Wed Feb 25 11:40:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* plaintext.c (ask_for_detached_datafile): add opt.verbose to
	info output.

	* openfile.c (open_sigfile): Try also name ending in ".asc"

Wed Feb 25 08:41:00 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (generate_keypair): Fixed memory overflow.

Tue Feb 24 15:51:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_certificate): Support for S2K.
	* build-packet.c (do_secret_cert): Ditto.
	* keygen.c (gen_elg): Ditto.
	* seckey-cert.c (check_elg): Ditto
	(protect_elg): Ditto.
	* sign.c (chnage_passphrase): Ditto.
	* passphrase.c (get_passphrase_hash): Support for a salt and
	changed all callers.
	(make_dek_from_passphrase): Ditto.

Tue Feb 24 12:30:56 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (hash_public_cert): Disabled debug output.

Fri Feb 20 17:22:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (init_trustdb) [MINGW32]: Removed 2nd mkdir arg.
	(keyring_copy) [MINGW32]: Add a remove prior to the renames.

Wed Feb 18 18:39:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am (OMIT_DEPENDENCIES): New.

	* rsa.c: Replaced log_bug by BUG.

Wed Feb 18 13:35:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (do_check_sig): Now uses hash_public_cert.
	* parse-packet.c (parse_certificate): Removed hashing.
	* packet.h (public_cert): Removed hash variable.
	* free-packet.c (copy_public_cert, free_public_cert): Likewise.

	* sig-check.c (check_key_signatures): Changed semantics.

Wed Feb 18 12:11:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (do_check): Add handling for revocation certificates.
	(build_sigrecs): Ditto.
	(check_sigs): Ditto.

Wed Feb 18 09:31:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (armor_filter): Add afx->hdrlines.
	* revoke.c (gen_revoke): Add comment line.
	* dearmor.c (enarmor_file): Ditto.

	* sig-check.c (check_key_signature): Add handling for class 0x20.
	* mainproc.c : Ditto.

Tue Feb 17 21:24:17 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c : Add header lines "...ARMORED FILE .."
	* dearmor.c (enarmor_file): New.
	* g10maint.c (main): New option "--enarmor"

Tue Feb 17 19:03:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c : Changed a lot, because the packets are now stored
	a simple linlked list and not anymore in a complicatd tree structure.

Tue Feb 17 10:14:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* free_packet.c (cmp_public_certs): New.
	(cmp_user_ids): New.

	* kbnode.c (clone_kbnode): New.
	(release_kbnode): Add clone support.

	* ringedit.c (find_keyblock_bypkc): New.

	* sign.c (remove_keysigs): Self signatures are now skipped,
	changed arguments and all callers.

	* import.c : Add functionality.

Tue Feb 17 09:31:40 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* options.h (homedir): New option.
	* g10.c, g10maint.c, getkey.c, keygen.c, trustdb.c (opt.homedir): New.

	* trustdb.c (init_trustdb): mkdir for hoem directory
	(sign_private_data): Renamed "sig" to "g10.sig"

Mon Feb 16 20:02:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* kbnode.c (commit_kbnode): New.
	(delete_kbnode): removed unused first arg. Changed all Callers.

	* ringedit.c (keyblock_resource_name): New.
	(get_keyblock_handle): NULL for filename returns default resource.

Mon Feb 16 19:38:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sig-check.s (check_key_signature): Now uses the supplied
	public key to check the signature and not any more the one
	from the getkey.c
	(do_check): New.
	(check_signature): Most work moved to do_check.

Mon Feb 16 14:48:57 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (find_header): Fixed another bug.

Mon Feb 16 12:18:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (scan_keyring): Add handling of compressed keyrings.

Mon Feb 16 10:44:51 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c, g10maint.c (strusage): Rewrote.
	(build_list): New

Mon Feb 16 08:58:41 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (use_armor): New.

Sat Feb 14 14:30:57 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (proc_tree): Sigclass fix.

Sat Feb 14 14:16:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (armor_filter): Changed version and comment string.
	* encode.c, sign.c, keygen.c: Changed all comment packet strings.

Sat Feb 14 12:39:24 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (aGenRevoke): New command.
	* revoke.c: New.
	* sign.c (make_keysig_packet): Add support for sigclass 0x20.

Fri Feb 13 20:18:14 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (enum_keyblocks, keyring_enum): New.

Fri Feb 13 19:33:40 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* export.c: Add functionality.

	* keygen.c (generate_keypair): Moved the leading comment behind the
	key packet.
	* kbnode.c (walk_kbnode): Fixed.

	* g10.c (main): listing armored keys now work.

Fri Feb 13 16:17:43 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_publickey, parse_signature): Fixed calls
	to mpi_read used for ELG b.

Fri Feb 13 15:13:23 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): changed formatting of help output.

Thu Feb 12 22:24:42 1998  Werner Koch  (wk@frodo)

	* pubkey-enc.c (get_session_key): rewritten

