                                                              -*- outline -*-

* src/base64
** Make parsing more robust
Currently we don't cope with overlong lines in the best way.
** Check that we really release the ksba reader/writer objects.

* sm/call-agent.c
** The protocol uses an incomplete S-expression
We should always use valid S-Exp and not just parts.
** Some code should go into import.c
** When we allow concurrent service request in gpgsm, we
might want to have an agent context for each service request
(i.e. Assuan context).

* sm/certreqgen.c
** Improve error reporting
** Do some basic checks on the supplied DNs

* sm/certchain.c
** When a certificate chain was sucessfully verified, make ephemeral certs used  in this chain permanent.
** Try to keep certificate references somewhere
  This will help with some of our caching code.  We also need to test
  that cachining; in particular "regtp_ca_chainlen".

* sm/decrypt.c
** replace leading zero in integer hack by a cleaner solution

* sm/gpgsm.c
** Support --output for all commands
** mark all unimplemented commands and options.
** Implement --default-key
** support the anyPolicy semantic
** Check that we are really following the verification procedures in rfc3280.
** Implement a --card-status command.
   This is useful to check whether a card is supported at all.


* sm/keydb.c
** Check file permissions
** Check that all error code mapping is done.
** Remove the inter-module dependencies between gpgsm and keybox
** Add an source_of_key field

* agent/command.c
** Make sure that secure memory is used where appropriate

* agent/pkdecrypt.c, agent/pksign.c
** Don't use stdio to return results.
** Support DSA

* Move pkcs-1 encoding into libgcrypt.

* Use a MAC to protect sensitive files.
  The problem here is that we need yet another key and it is unlikely
  that users are willing to remember that key too.  It is possible to
  do this with a smartcard, though.

* sm/export.c
** Return an error code or a status info per user ID.

* scd/tlv.c
  The parse_sexp fucntion should not go into this file.  Check whether
  we can change all S-expression handling code to make use of this
  function.

* scd
** Application context vs. reader slot
  We have 2 concurrent method of tracking whether a read is in use:
  Using the session_list in command.c and the lock_table in app.c.  IT
  would be better to do this just at one place. First we need to see
  how we can support cards with multiple applications.
** Detecting a removed card works only after the ticker detected it.
 We should check the card status in open-card to make this smoother.
 Needs to be integrated with the status file update, though.  It is
 not a real problem because application will get a card removed status
 and should the send a reset to try solving the problem.

* tests
** Makefile.am
  We use printf(1) to setup the library path, this is not portable.
  Furthermore LD_LIBRARY_PATH is not used on all systems.  It doesn't
  matter for now, because we use some GNU/*BSDish features anyway.

** Add a test to check the extkeyusage.

* doc/
** Explain how to setup a root CA key as trusted
** Explain how trustlist.txt might be managed.
** Write a script to generate man pages from texi.
   In progress (yatm)


* Windows port
** gpgsm's LISTKEYS does not yet work
    Fix is to change everything to libestream
** Signals are not support 
    This means we can't reread a configuration
** No card status notifications.



* sm/
** --include-certs is as of now still a dummy command line option
** check that we issue NO_SECKEY xxx if a -u key was not found

* gpg/
** issue a NO_SECKEY xxxx if a -u key was not found.
** Replace DIGEST_ALGO_SHA224
   We can't do that right now because it is only defined by newer
   versions of libgcrypt.  Changes this if we require libgcrypt 1.3
   anyway.

