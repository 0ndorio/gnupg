2004-12-21  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c (get_config_pathname) [DOSISH]: Detect absolute
	pathnames with a drive letter.

2004-12-15  Werner Koch  <wk@g10code.com>

	* Makefile.am (bin_PROGRAMS) [W32]: Do not build watchgnupg.

	* gpgconf-comp.c (gpg_agent_runtime_change) [W32]: No way yet to
	send a signal.  Disable.
	(change_options_file, change_options_program) [W32]: No link(2),
	so we disable it.
	(gc_component_change_options): Use rename instead of link.

2004-12-13  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c <ignore-ocsp-service-url>: Fixed typo.

2004-11-24  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c <dirmngr>: Add --ignore-http-dp, --ignore-ldap-dp
	and --ignore-ocsp-service-url.

2004-11-23  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c <dirmngr>: Add the proxy options.
	<gpgsm>: Add --prefer-system-daemon.

2004-11-11  Werner Koch  <wk@g10code.com>

	* watchgnupg.c (main): Fixed test for read error.

2004-10-22  Werner Koch  <wk@g10code.com>

	* Makefile.am (bin_SCRIPTS): Add gpgsm-gencert.sh

	* gpgsm-gencert.sh: Fixed copyright; its part of GnuPG thus FSF.

2004-10-01  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c: Made all strings for --log-file read the same.
	
2004-10-01  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c (my_dgettext): Also switch codeset and directory
	for the other used domains (i.e. dirmngr).

	* gpgconf.c (main): Fixed translation markers.

2004-09-30  Werner Koch  <wk@g10code.com>

	* gpgconf.c (i18n_init): Always use LC_ALL.

	* Makefile.am: Adjusted for gettext 0.14.

2004-09-29  Werner Koch  <wk@g10code.com>

	* gpgconf-comp.c: Made the entries fro GROUPs translatable.
	Include i18n.h.
	(my_dgettext): Hack to use the gnupg2 domain.

2004-08-09  Moritz Schulte  <moritz@g10code.com>

	* gpgsm-gencert.sh: New file.

2004-06-16  Werner Koch  <wk@gnupg.org>

	* rfc822parse.c (rfc822parse_get_field): Add arg VALUEOFF.

2004-06-14  Werner Koch  <wk@gnupg.org>

	* no-libgcrypt.c (gcry_realloc, gcry_xmalloc, gcry_xcalloc): New.

	* gpgconf-comp.c (retrieve_options_from_program) 
	(retrieve_options_from_file, change_options_file) 
	(change_options_program, gc_component_change_options): Replaced
	getline by read_line and test for allocation failure.

2004-05-21  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_options_dirmngr): Remove CRL group, put its
	only option "max-replies" into LDAP group.
	(gc_component): Change description of dirmngr to "Directory
	Manager".

	* gpgconf-comp.c (gc_component_change_options): Move the
	per-process backup file into a standard location.

2004-05-03  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c: Add --allow-mark-trusted for the gpg-agent.

2004-04-30  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c: Added more runtime flags for the gpg-agent
	backend.

2004-04-29  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (change_options_program): Turn on utf8-strings in
	the gpgconf specific part of the config file for the GnuPG
	backend.

2004-04-28  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c: Add --ocsp-signer for the dirmngr backend.

2004-04-20  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_options_gpg_agent): Change type of
	ignore-cache-for-signing option to GC_ARG_TYPE_NONE.

2004-04-07  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c (my_dgettext): Switch the codeset once to utf-8.
	Allow building with out NLS.

2004-03-23  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_options_dirmngr): Set GC_OPT_FLAG_ARG_OPT for
	"LDAP Server".
	(change_options_file): Remove assertion that tests that this flag
	is not present.  Handle an empty string in OPTION->new_value.

	* gpgconf.c (main): Remove obsolete warning.

2004-03-23  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c (gc_options_gpg): New.
	(gc_component_t, gc_component): Add GC_BACKEND_GPG.
	(gc_options_dirmngr): Add allow-ocsp.

2004-03-23  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_flag): Add missing flags.

	* gpgconf-comp.c: Include <signal.h>.
	(gc_backend): Add new member runtime_change.
	(gpg_agent_runtime_change): New function.
	(gc_component_change_options): New variable runtime.  Initialize
	it.  If an option is changed that has the GC_OPT_FLAG_RUNTIME bit
	set, also set the corresponding runtime variable.  Finally, call
	the runtime_change callback of the backend if needed.	

2004-03-16  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c (gc_options_gpg_agent): Implemented.
	(gc_options_gpgsm, gc_options_scdaemon): Implemented.
	(gc_backend_t): Add GC_BACKEND_SCDAEMON.

2004-03-12  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_component_change_options): Set the filenames
	of the option's backend, not of the component.
	Also use GC_BACKEND_NR, not GC_COMPONENT_NR.

2004-03-09  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c [_riscos_]: Removed special code for RISC OS; we
	don't want to clutter our code with system dependent stuff.

2004-03-08  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (retrieve_options_from_file): Quote each string
	in the list, not only the first.

2004-02-26  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_component_list_options): Do not print empty
	groups.

	* gpgconf-comp.c (option_check_validity): Check if option is
	active.
	(change_options_file): Implement.

	* gpgconf-comp.c (retrieve_options_from_program): Remove broken
	string handling.

	* gpgconf-comp.c (change_options_program): Support all types of
	options, including list types.

	* README.gpgconf: Fix description of arguments.
	* gpgconf-comp.c (option_check_validity): Rewritten to properly
	support optional arguments in lists.

	* README.gpgconf: Add info about optional arg and arg type 0.
	* gpgconf-comp.c (gc_component_change_options): Parse list of
	arg type 0 options.
	(option_check_validity): Add new argument NEW_VALUE_NR.  Perform
	rigorous validity checks.
	(change_options_program): Disable an option also if we have a new
	value for it.

2004-02-25  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_component_list_options): Correct output for
	lists of arg type none.
	(struct gc_option): Add new member new_flags.
	(option_check_validity): Check OPTION->new_flags beside
	OPTION->new_value.  Add new argument FLAGS.
	(gc_component_change_options): Support default flag correctly.
	(change_options_program): Likewise.

2004-02-24  Marcus Brinkmann  <marcus@g10code.de>

	* README.gpgconf: Revert last change.  Add new flags "default",
	"default desc" and "no arg desc".  Add new field ARGDEF.  Add new
	field FLAG to backend interface.
	* gpgconf-comp.c (struct gc_option): Make flags of type unsigned
	long.
	(gc_component_list_options): Adjust type for flags.
	Add default argument field.
	(retrieve_options_from_program): Use "1" as value for non-option
	arguments, not "Y".
	(gc_component_change_options): Read in flags from input.

2004-02-23  Marcus Brinkmann  <marcus@g10code.de>

	* README.gpgconf: Change meaning of type 0 options value if it is
	the empty string or "0".

	* gpgconf.h (struct): Add member runtime.
	* gpgconf.c: Add new option oRuntime.
	(main): Same here.

	* gpgconf-comp.c (hextobyte): New function.
	(percent_deescape): New function.
	(get_config_pathname): Percent deescape pathname if taken from
	option (default) value.  Use default value only if it exists and
	is not empty.  Use empty string otherwise.  Don't include leading
	quote in pathname.
	(change_options_program): Percent deescape string before writing
	it out.
	
	* gpgconf-comp.c (gc_component_list_options): Do not skip groups
	on output.

2004-02-18  Werner Koch  <wk@gnupg.org>

	* gpgconf-comp.c: Added empty components for gpgsm and scdaemon.

2004-02-12  Werner Koch  <wk@gnupg.org>

	* watchgnupg.c (main): Implement option "--".
	(print_version): New.

	* Makefile.am: Include cmacros.am for common flags.

2004-02-03  Werner Koch  <wk@gnupg.org>

	* addgnupghome: Try to use getent, so that it also works for NIS
	setups.

2004-01-31  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c: Some bug fixes, parse only defaults from the
	program, and read the current values from the configuration file
	directly.

2004-01-30  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-comp.c (gc_error): New function, use it instead of
	error() throughout.

	* gpgconf-comp.c: Use xmalloc, libcommon's asctimestamp and
	gnupg_get_time, fix error() invocation and use getline()
	consistently.
	
2004-01-30  Werner Koch  <wk@gnupg.org>

	* addgnupghome: Also set the group of copied files. 

2004-01-30  Werner Koch  <wk@gnupg.org>

	* Makefile.am (sbin_SCRIPTS): New, to install addgnupghome.
	(EXTRA_DIST): Added rfc822parse.c rfc822parse.h gpgparsemail.c
	which might be useful for debugging.

2004-01-29  Werner Koch  <wk@gnupg.org>

	* addgnupghome: New.

2004-01-29  Marcus Brinkmann  <marcus@g10code.de>

	* gpgconf-list.c: File removed.
	* README.gpgconf: New file.
	* gpgconf-comp.c: New file.
	* Makefile.am (gpgconf_SOURCES): Remove gpgconf-list.c, add
	gpgconf-comp.c.

2004-01-16  Werner Koch  <wk@gnupg.org>

	* watchgnupg.c (main): Need to use FD_ISSET for the client
	descriptors too; aiiih.  Set the listening socket to non-blocking.

2004-01-10  Werner Koch  <wk@gnupg.org>

	* Makefile.am: Use GPG_ERROR_CFLAGS
	
2004-01-05  Werner Koch  <wk@gnupg.org>

	* Manifest: New.
	* gpgconf.c, gpgconf.h, gpgconf-list.c: New. A skeleton for now.
	* no-libgcrypt.c: New.
	* Makefile.am: Add above.

2003-12-23  Werner Koch  <wk@gnupg.org>

	* Makefile.am: New.
	* watchgnupg.c: New.


 Copyright 2003, 2004 Free Software Foundation, Inc.

 This file is free software; as a special exception the author gives
 unlimited permission to copy and/or distribute it, with or without
 modifications, as long as this notice is preserved.

 This file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY, to the extent permitted by law; without even the
 implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
